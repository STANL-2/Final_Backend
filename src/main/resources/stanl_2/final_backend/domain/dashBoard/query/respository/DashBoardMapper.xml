<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="stanl_2.final_backend.domain.dashBoard.query.repository.dashBoardMapper">
    <resultMap id="allDashBoards" type="stanl_2.final_backend.domain.dashBoard.query.dto.dashBoardDTO">
        <id property="customerId" column="CUST_ID"/>
        <result property="name" column="CUST_NAME"/>
        <result property="age" column="CUST_AGE"/>
        <result property="sex" column="CUST_SEX"/>
        <result property="phone" column="CUST_PHO"/>
        <result property="emergePhone" column="CUST_EMER_PHO"/>
        <result property="email" column="CUST_EMA"/>
        <result property="memberId" column="MEM_ID"/>
        <result property="active" column="ACTIVE"/>
        <result property="createdAt" column="CREATED_AT"/>
        <result property="updatedAt" column="UPDATED_AT"/>
        <result property="deletedAt" column="DELETED_AT"/>
    </resultMap>
    <select id="findDashBoardInfoByMemberId" resultMap="allDashBoards" parameterType="string">
        SELECT
            a.sch_id,
            a.sch_name,
            a.sch_cont,
            a.sch_tag,
            a.sch_srt_at,
            a.sch_end_at,
            a.mem_id
        FROM tb_schedule a
        WHERE mem_id = #{ memberId }
        AND sch_srt_at LIKE CONCAT(#{ month },'%')
        AND active = true
    </select>

</mapper>